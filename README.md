
<img width="524" alt="Screenshot 2025-04-09 at 4 25 01â€¯PM" src="https://github.com/user-attachments/assets/1b539e90-f16a-4890-8f66-70be46d57e75" />

## ğŸ§‘â€ğŸ¤ ä¸€è¨€ç´¹ä»‹

[SMãƒãƒ¼ãƒãƒ£ãƒ«ãƒŸãƒ¥ãƒ¼ã‚¸ã‚·ãƒ£ãƒ³ Naevis](https://naevisofficial.com/)ã®ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—å±•ç¤ºä½“é¨“ç”¨ **ARã‚²ãƒ¼ãƒ **ã€‚

ç•°ä¸–ç•Œã‹ã‚‰æ¥ãŸ **Naevis ã«åœ°çƒã®ã‚‚ã®ã‚’æ•™ãˆã¦ã€è¦ªå¯†åº¦ã‚’ä¸Šã’ã‚‹** ã‚³ãƒ³ã‚»ãƒ—ãƒˆã€‚
<br>
<br>

## ğŸ“º ãƒ—ãƒ¬ã‚¤å‹•ç”»
https://www.youtube.com/shorts/xhghoX2gcs4
<br>
<br>

## ğŸ›  æ‹…å½“éƒ¨åˆ†

- ARã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³å…¨ä½“ã®è¨­è¨ˆã¨å®Ÿè£…  
- Reality Composer Pro ã‚’ç”¨ã„ãŸãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã®åˆ¶ä½œ  
- Xcode ä¸Šã§ `.usdz` ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŠã‚ˆã³ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯åˆ¶å¾¡ã®å®Ÿè£…  
<br>
<br>

## ğŸ¦¦ ã‚¢ãƒ”ãƒ¼ãƒ«ãƒã‚¤ãƒ³ãƒˆã¨æŒ‘æˆ¦èª²é¡Œ

<details>
<summary>â‘  RealityKitã«ãŠã‘ã‚‹è¡çªç®¡ç†</summary>

![á„‰á…¦á„…á…©_1](https://github.com/user-attachments/assets/a3d5be06-4bb8-4fd8-8df9-3e0eda6d3e58)


### ğŸ”§ å®Ÿè£…æ¦‚è¦

ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã¨ã‚¢ã‚¤ãƒ†ãƒ ãŒè¡çªã—ãŸéš›ã«ã€ã‚¢ã‚¤ãƒ†ãƒ ãŒæ¶ˆãˆã‚‹å‡¦ç†ã‚’RealityKitã§å®Ÿè£…ã—ã¾ã—ãŸã€‚

### ğŸ”§ Unityã¨RealityKitã®é•ã„

- `Unity`: å„GameObjectã®Componentã§å‡¦ç†
- `RealityKit`: å…¨ä½“ã®CollisionEventã§å‡¦ç†

Unityã§ã¯ã€ã‚²ãƒ¼ãƒ ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã—ã¦ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ã‚¢ã‚¿ãƒƒãƒã™ã‚‹å½¢å¼ã®ãŸã‚ã€**è¡çªã—ãŸä¸»ä½“ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨è¡çªã•ã‚ŒãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ˜ç¢ºã«åŒºåˆ¥**ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã—ã‹ã—ã€RealityKitã§ã¯è¡çªã‚¤ãƒ™ãƒ³ãƒˆ`Collision Event`è‡ªä½“ã‚’æ¤œçŸ¥ã—ã€ç‰¹å®šã®ãƒ«ãƒ¼ãƒ«ã§`entityA`ã¨`entityB`ãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚Œã‚‹ä»•çµ„ã¿ã«ãªã£ã¦ã„ã¾ã™ã€‚ãã‚Œã§ã€ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã¨ã‚¢ã‚¤ãƒ†ãƒ ãŒè¡çªã—ãŸéš›ã«ã€ãƒ©ãƒ³ãƒ€ãƒ ã§ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãŒæ¶ˆãˆã¦ã—ã¾ã„ã¾ã—ãŸã€‚

ãã“ã§ã€Entityã‚’ç”Ÿæˆã™ã‚‹éš›**ã€**åå‰ã‚’ä»˜ã‘ã¦ãŠãã€è¡çªæ™‚ã«ãã®åå‰ã‚’åŸºæº–ã«å‰Šé™¤ã™ã‚‹ã“ã¨ã§ã€ã“ã®å•é¡Œã‚’è§£æ±ºã—ã¾ã—ãŸã€‚



### ğŸ’» ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰

```swift
//MARK: - Entityã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°
func loadEntity(modelName: String) {
    guard let decoAnchor = decoAnchor else { return }

    let entity = try! ModelEntity.loadModel(named: "\(modelName)")

    // è¡çªåˆ¤å®šã«å¿…è¦â‘  CollisionShapeã®ç”Ÿæˆ
    entity.generateCollisionShapes(recursive: true)

    // è¡çªåˆ¤å®šã«å¿…è¦â‘¡ CollisionComponentã®è¨­å®š - mode: trigger 
    entity.collision = CollisionComponent(
        shapes: [.generateBox(size: [0.2, 0.2, 0.2])],
        mode: .trigger,
        filter: .sensor
    )

    // è¡çªåˆ¤å®šã«å¿…è¦â‘¢ PhysicsBodyComponentã®è¿½åŠ   - mode: dynamic
    entity.physicsBody = PhysicsBodyComponent(massProperties: .default, mode: .dynamic)

    // è¡çªæ™‚ã«è­˜åˆ¥ã§ãã‚‹ã‚ˆã†ã«åå‰ã‚’è¨­å®š
    entity.name = "deco"

    view?.installGestures(for: entity)
    decoAnchor.addChild(entity)
}
```
```swift
// MARK: - è¡çªå‡¦ç†
private func handleCollision(event: CollisionEvents.Began) {
    guard let entityA = event.entityA as? ModelEntity,
          let entityB = event.entityB as? ModelEntity else { return }

    // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ¢ãƒ‡ãƒ«ã®ColliderãŒè¤‡æ•°é‡ãªã£ã¦ãŠã‚Šã€è¡çªãŒé‡è¤‡ç™ºç”Ÿ
    // hashè­˜åˆ¥å­ã§ä¸€åº¦ã ã‘å‡¦ç†ã•ã‚Œã‚‹ã‚ˆã†ã«åˆ¶å¾¡
    let pairIdentifier = entityA.hashValue ^ entityB.hashValue
    guard !processedEntities.contains(ObjectIdentifier(pairIdentifier as AnyObject)) else { return }
    processedEntities.insert(ObjectIdentifier(pairIdentifier as AnyObject))

    // "deco"ã ã‘ã‚’æ¶ˆã™ã‚ˆã†ã«æ¡ä»¶åˆ†å²
    if (entityA.name == "naevis" && entityB.name == "deco") {
        entityB.removeFromParent()
        loadFXEntity()
    } else if (entityA.name == "deco" && entityB.name == "naevis") {
        entityA.removeFromParent()
        loadFXEntity()
    }

    // ä¸€å®šæ™‚é–“å¾Œã«è­˜åˆ¥å­ã‚’ã‚¯ãƒªã‚¢ã—ã¦å†è¡çªå¯èƒ½ã«
    DispatchQueue.main.asyncAfter(deadline: .now() + 1.0) { [weak self] in
        self?.processedEntities.remove(ObjectIdentifier(pairIdentifier as AnyObject))
    }
}
```
</details>

<details>
<summary>â‘¡ RealityKitã«ãŠã‘ã‚‹ModelEntityã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åˆ¶å¾¡</summary>
    
![i](https://github.com/user-attachments/assets/29ec4685-a02b-44b2-94a1-ae1ecd1696ea)



### ğŸ”§ å®Ÿè£…æ¦‚è¦
Reality Composer Proã«ã¯ã€Unityã®Animatorã®ã‚ˆã†ã«ã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹ã‚’ä¸€å…ƒç®¡ç†ã™ã‚‹æ©Ÿèƒ½ãŒãªã‹ã£ãŸãŸã‚ã€ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã§å®Ÿè£…ã—ã¾ã—ãŸã€‚

ã¾ãŸã€Blenderå´ã§è¤‡æ•°ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é…åˆ—ã¨ã—ã¦æ ¼ç´ã—ã€ãã‚Œã‚’RealityKitå´ã§åˆ‡ã‚Šæ›¿ãˆã‚‹æ–¹æ³•ãŒå­˜åœ¨ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ãŒã€ç¾æ™‚ç‚¹ã§ã¯ãã®å…·ä½“çš„ãªå®Ÿè£…æ–¹æ³•ãŒã‚ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚


### ğŸ’» ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
```swift
// .usdzãƒ•ã‚¡ã‚¤ãƒ«ã«åŸ‹ã‚è¾¼ã¾ã‚ŒãŸã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å†ç”Ÿ
if let naevis = naevis, let animation = naevis.availableAnimations.first {
     naevis.playAnimation(animation.repeat(count: 1), transitionDuration: 0.5, startsPaused: false)
}
```
</details>
<details>
<summary>â‘¢ Reality Composer Proã‚’æ´»ç”¨ã—ãŸãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã®ç”Ÿæˆ</summary>

![01_ISSAC (1)](https://github.com/user-attachments/assets/f3ee5d02-0e5f-45d2-85b5-862eca0e159a)



### ğŸ”§ å®Ÿè£…æ¦‚è¦
RealityComposerProã§ä½œæˆã—ãŸãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚’.usdzå½¢å¼ã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã€ã‚³ãƒ¼ãƒ‰ã§èª­ã¿è¾¼ã‚“ã§ä½¿ç”¨ã—ã¾ã—ãŸã€‚

### ğŸ’» ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
```swift
// RealityComposerProã§ä½œæˆã—ãŸãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚’.usdzã¨ã—ã¦ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã€ModelEntityã¨ã—ã¦ç”Ÿæˆã™ã‚‹æ–¹æ³•
let FX = try! ModelEntity.load(named: "heartFX")
```
</details>

<br>
<br>

## ğŸ”Â æŒ¯ã‚Šè¿”ã‚Š

### å­¦ã‚“ã ã“ã¨
- Unityãªã©ã®ã‚²ãƒ¼ãƒ ã‚¨ãƒ³ã‚¸ãƒ³ã§ã¯ãªãã€Xcodeä¸Šã§3Dã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…ã—ã¦ã¿ã¾ã—ãŸã€‚
- RealityKitã§ä½¿ç”¨ã§ãã‚‹æ‹¡å¼µå­ã¯ä¸€èˆ¬çš„ã«ä½¿ã‚ã‚Œã‚‹.fbxã§ã¯ãªã.usdzã§ã‚ã‚‹ãŸã‚ã€ãƒãƒ†ãƒªã‚¢ãƒ«ã‚„ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’.usdzã«åˆã‚ã›ã¦å¤‰æ›ã—ã¦æŠ½å‡ºã™ã‚‹éç¨‹ã§è‹¦åŠ´ã—ã¾ã—ãŸãŒã€3Dæ‹¡å¼µå­ã«ã¤ã„ã¦ã®ç†è§£ã‚’æ·±ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚
- 3Dãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¤§ãã„ãŸã‚ã€ã‚¢ãƒ—ãƒªãŒã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã™ã‚‹å•é¡ŒãŒã‚ã‚Šã¾ã—ãŸãŒã€éåŒæœŸãƒ­ãƒ¼ãƒ‰å‡¦ç†ãªã©ã§æ”¹å–„ã—ã¾ã—ãŸã€‚
<br>

### æ”¹å–„ç‚¹
- å¤šæ§˜ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…ã—ãŸã‹ã£ãŸã®ã§ã™ãŒã€RealityKitã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã«é–¢ã™ã‚‹å†…éƒ¨æ§‹é€ ã®æƒ…å ±ãŒå°‘ãªãã€æœ€çµ‚çš„ã«2ç¨®é¡ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç¹°ã‚Šè¿”ã™ã ã‘ã«ãªã£ã¦ã—ã¾ã£ãŸã®ãŒæ®‹å¿µã§ã—ãŸã€‚
- ARKitã®åº§æ¨™ç³»ã«ã¤ã„ã¦ã¯ã¾ã ç†è§£ãŒä¸ååˆ†ã§ã€åˆ†æã‚’è©¦ã¿ãŸã‚‚ã®ã®ã€è¡¨é¢ã§ã®ã‚¢ã‚¤ãƒ†ãƒ ã®ã‚¹ãƒãƒ¼ãƒ³ä½ç½®ãŒæ¯å›ç•°ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚
- Unityã§ã®è¡çªå‡¦ç†ã«ã¯æ…£ã‚Œã¦ã„ã‚‹ã®ã§ã™ãŒã€RealityKitã«ãŠã„ã¦ã¯ã€è¡çªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚‹EntityAã¨EntityBã‚’ã©ã®ã‚ˆã†ã«ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ã¦å‡¦ç†ã™ã‚‹ã‹æ‚©ã‚“ã§ãŠã‚Šã€ç¾åœ¨ã®å®Ÿè£…ãŒæœ€é©ã ã¨ã¯æ€ã£ã¦ã„ã¾ã›ã‚“ã€‚

